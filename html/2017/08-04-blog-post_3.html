<!DOCTYPE html>

<html lang="ru">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Расходы проверок</title>

  <link rel="stylesheet" type="text/css" href="../main.css"/>
</head>

<body><h2>Накладные расходы проверок</h2>
<style>
  tr.sel {
    background-color:#DED;
  }
</style>

<p>Сделал тест для измерения накладных расходов проверок корректности времени исполнения, которыми транслятор сопровождает основной код. Воплощены проверки: переполнения типа, выхода за границы массива, использования неинициализированных переменных, приведения базовой записи к расширенной, пользовательские ASSERT. Тест представляет собой специальную сборку транслятора, которая несколько раз собирает сама себя. Полагаю, это хороший практический тест. Для сравнения добавлены проверки, доступные в современных компиляторах С: 
    <code>fsanitize=address и fsanitize=undefined</code>.
</p> 
<p>Для запуска теста используется сценарий benchmark.sh, находящийся в каталоге проекта.</p>
<p>Компилятор: gcc-6.3.0 -O3 -flto.   
<table>
  <tr><th>                <th>Размер, байт<th>Размер, отношение<th>Время, секунд<th>Время, отношение 
  <tr class='sel'><th>Без проверок    <td>161 776     <td>1                <td>0.27         <td>1 
  <tr class='sel'><th>Восток          <td>219 128     <td>1.35             <td>0.34         <td>1.26
  <tr><th>asan undefined  <td>1 284 392   <td>7.93             <td>0.42         <td>1.56 
  <tr><th>asan address    <td>566 520     <td>3.5              <td>0.74         <td>2.74 
  <tr><th>asan addr+undef <td>3 006 456   <td>18.58            <td>0.90         <td>3.33 
  <tr><th>Восток+addr+undef<td>3 637 976  <td>22.49            <td>1.04         <td>3.85 
</table>

<p>Проверки ещё несовершенны, поэтому можно ожидать некоторого увеличения накладных расходов по мере улучшения транслятора. </p> 

</body>
</html>
