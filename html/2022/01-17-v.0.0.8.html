<!DOCTYPE html>

<html lang="ru">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Выпуск транслятора</title>

  <link rel="stylesheet" type="text/css" href="../main.css"/>
</head>

<body><h2>Версия 0.0.8</h2>
<p>Выпущено 
  <a href="https://github.com/Vostok-space/vostok/releases/tag/lib-v0.0.7_ost-v0.0.8">обновление</a>
  транслятора, библиотеки и сборщика Android приложений. Как и прежде, доступна установка и автоматическое
  обновление из 
  <a href="https://snapcraft.io/vostok">Snap Store</a>,
  <a href="https://wiki.oberon.org/repo">deb-репозитория</a> и
  <a href="https://github.com/Vostok-space/homebrew-oberon">Homebrew</a>.
  Также доступна <a href="http://vostok.oberon.org/sandbox.html">Web-песочница</a>.
</p>

<!--more-->

<ul>
  <li>
    Добавлена поддержка псевдо-модуля 
    <a href="../../2021/12/system.html">SYSTEM</a>, 
    доступной при использовании опции транслятора -allow-system.
    Так как сейчас в качестве адреса используется только INTEGER, то нормальная работа обеспечена только 
    для 32-битных систем.
    При трансляции в Java и JavaScript генерируются заглушки.
  </li>
  <li>
    Добавлена генерация справочных деклараций модулей - DEFINITION, в которых перечислены только
    экспортированные сущности. Доступно по команде транслятора to-modef.
  </li>
  <li>
    Добавлена возможность конвертации единственного файла с выдачей в стандартный вывод. Доступно через 
    указание в качестве цели "-" или пустого параметра "".
  </li>
  <li>
    В генерации выходного кода для отступов табуляция заменена на пробелы. В коде транслятора
    отступы можно настраивать, но настройка не выведена в интерфейс командной строки.
  </li>
  <li>
    Улучшено:
    <ul>
      <li>Статический и динамический анализ не инициализированных переменных.</li>
      <li>Восстановление анализа после синтаксических ошибок в выражениях</li>
      <li>Читаемость сгенерированного C-кода: убраны лишние O7_MUL() и избыточное экранирование
          не ASCII символов в строках.</li>
      <li>Расширен список учтённых ключевых слов в C++ для избежания конфликтов с именами.
          В основном, список увеличен за счёт стандарта 20-го года.</li>
    </ul>
  </li>
  <li>
    Исправлено:
    <ul>
      <li>Ложная диагностика перекрытия имени элементом в расширенной записи в случае, если
          одноимённый элемент объявлен в базовой записи из импортированного модуля, но не экспортирован.
          Также добавлено переименование одноимённых элементов в расширенных записях при генерации
          в JavaScript.
      </li>
      <li>Генерация в Java и JavaScript в режиме без инициализации переменных при которой отсутствует
          как дополнительное зануление, так и динамическая диагностика не инициализированных переменных.
      </li>
      <li>Генерация в Java вызова LEN() для массивов, чья длина задана составным выражением.
      </li>
      <li>Генерация в C открытых массивов с элементами-массивами известной длины, значений множеств
          увеличенного диапазона, экспортированных указателей на не экспортированные записи,
          анонимных указателей в режиме генерации с подсчётом ссылок.</li>
      <li>Падение при разборе ошибочного кода при попытке получить селектор массива от элемента 
          ошибочного типа и при проверке длин некоторых массивов, длины которых заданы составными выражениями.
      </li>
    </ul>
  </li>
</ul>

<p> В <i>библиотеке по умолчанию</i></p>
<ul>
  <li>
    Добавлены OsRand.Set для считывания случайных данных в множество,
    Chars0X.CopyCharsFromLoop для копирования символов из закольцованного буфера,
    log.c для вывода одиночной литеры.
  </li>
  <li>
    В OsExec исправлен вывод при работе из node.js и воплощена работа через QuickJS.
  </li>
  <li>
    Воплощён OsEnv для JavaScript.
  </li>
  <li>
    Для C воплощён эффективный код для ArrayCopy и ArrayFill и 
    немного оптимизированы проверки вычислений с дробями.
  </li>
  <li>
    Для C добавлена возможность компилировать chibicc, исправлена компилируемость кода как С++ 
    и в режиме подсчёта ссылок.
  </li>
  <li>
    Для Java устранён возможный конфликт имён для модуля, названного System.
  </li>
  <li>
    Устранена возможность закрытия стандартных потоков вывода.
  </li>
</ul>

</body>
</html>
